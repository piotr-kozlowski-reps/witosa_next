generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String             @id @default(uuid())
  name           String
  email          String             @unique
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  hashedPassword String
  userRole       UserRole           @default(EDITOR)
  activities     CyclicalActivity[]
  events         Event[]
  artisticGroups ArtisticGroup[]
}

model ImageEvent {
  id                              String  @id @default(uuid())
  url                             String
  alt                             String
  additionInfoThatMustBeDisplayed String?
  eventId                         String
  index                           Int
  event                           Event   @relation(fields: [eventId], references: [id])
}

model ImageCyclicalActivity {
  id                              String           @id @default(uuid())
  url                             String
  alt                             String
  additionInfoThatMustBeDisplayed String?
  cyclicalActivityId              String
  index                           Int
  cyclicalActivity                CyclicalActivity @relation(fields: [cyclicalActivityId], references: [id])
}

model ImageArtisticGroup {
  id                              String  @id @default(uuid())
  url                             String
  alt                             String
  additionInfoThatMustBeDisplayed String?
  artisticGroupId                 String
  index                           Int
  artisticGroup                   ArtisticGroup @relation(fields: [artisticGroupId], references: [id])
}

model Event {
  id                                      String       @id @default(uuid())
  authorId                                String
  createdAt                               DateTime     @default(now())
  eventEndDate                            DateTime?
  eventStartDate                          DateTime
  title                                   String
  updatedAt                               DateTime     @updatedAt
  isToBeInNewsSection                     Boolean
  isToBePublished                         Boolean
  isToBeInRssChannel                      Boolean      @default(true)
  newsSectionImageUrl                     String?
  shortDescription                        String
  detailedDescription                     String
  isPayed                                 Boolean
  newsSectionImageAlt                     String?
  visibleFrom                             DateTime?
  visibleTo                               DateTime?
  kindOfEnterInfo                         String
  eventForWhom                            ForWhom[]
  places                                  Place[]
  isToBeOnlyInNewsSection_NotSeenInEvents Boolean
  isDateToBeHiddenInNewsSection           Boolean?
  isToBeInSlider                          Boolean
  sliderImageAlt                          String?
  sliderImageUrl                          String?
  visibleInSliderFrom                     DateTime?
  eventTypes                              EventType[]
  customLinkToDetails                     String?
  isCustomLinkToDetails                   Boolean
  visibleInSliderTo                       DateTime?
  ticketBuyingId                          String?
  author                                  User         @relation(fields: [authorId], references: [id])
  images                                  ImageEvent[]
}

model ArtisticGroup {
  id                                      String       @id @default(uuid())
  authorId                                String
  title                                   String
  isToBePublished                         Boolean
  detailedDescription                     String
  createdAt                               DateTime     @default(now())
  updatedAt                               DateTime     @updatedAt
  author                                  User         @relation(fields: [authorId], references: [id])
  images                                  ImageArtisticGroup[]
}

model CyclicalActivityOccurrence {
  id                 String           @id @default(uuid())
  day                Day
  activityStart      DateTime
  activityEnd        DateTime
  cyclicalActivityId String
  cyclicalActivity   CyclicalActivity @relation(fields: [cyclicalActivityId], references: [id])
}

model CyclicalActivity {
  id                    String                       @id @default(uuid())
  activityTypes         ActivityType[]
  name                  String
  shortDescription      String
  expiresAt             DateTime?
  isToBePublished       Boolean
  createdAt             DateTime                     @default(now())
  updatedAt             DateTime                     @updatedAt
  authorId              String
  customLinkToDetails   String?
  activitiesForWhom     ForWhom[]
  places                Place[]
  longDescription       String?
  isExpiresAtRequired   Boolean
  isCustomLinkToDetails Boolean
  author                User                         @relation(fields: [authorId], references: [id])
  occurrence            CyclicalActivityOccurrence[]
  images                ImageCyclicalActivity[]
}

model Newsletter {
  email     String   @id @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum EventType {
  FESTIVAL
  CONCERT
  CABARET
  SPECTACLE
  CYCLIC_MEETING
  WORKSHOP
  LECTURE
  OTHERS
  DANCE
  LITERATURE
}

enum UserRole {
  ADMIN
  EDITOR
}

enum ActivityType {
  DANCE
  PLASTICITY
  MULTIMEDIA
  THEATER
  MUSIC
  EDUCATION
  RECREATION
  OTHERS
}

enum ForWhom {
  CHILDREN
  TEENS
  ADULTS
  SENIORS
  WOMEN
}

enum Day {
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
  SUNDAY
}

enum Place {
  DANCING_ROOM
  ART_ROOM
  CONCERT_HALL
}
